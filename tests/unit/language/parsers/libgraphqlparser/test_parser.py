import pytest

from tartiflette.language.ast import (
    ArgumentNode,
    BooleanValueNode,
    DirectiveNode,
    DocumentNode,
    EnumValueNode,
    FieldNode,
    FloatValueNode,
    FragmentDefinitionNode,
    FragmentSpreadNode,
    InlineFragmentNode,
    IntValueNode,
    ListTypeNode,
    ListValueNode,
    Location,
    NamedTypeNode,
    NameNode,
    NonNullTypeNode,
    NullValueNode,
    ObjectFieldNode,
    ObjectValueNode,
    OperationDefinitionNode,
    SelectionSetNode,
    StringValueNode,
    VariableDefinitionNode,
    VariableNode,
)
from tartiflette.language.parsers.libgraphqlparser import parse_to_document


@pytest.mark.parametrize(
    "sdl,expected",
    [
        (
            """
            {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=None,
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=13, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            query {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=None,
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=19, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            query NamedQuery {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=NameNode(
                            value="NamedQuery",
                            location=Location(
                                line=2, column=19, line_end=2, column_end=29
                            ),
                        ),
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=30, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            mutation {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="mutation",
                        name=None,
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=22, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            mutation NamedMutation {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="mutation",
                        name=NameNode(
                            value="NamedMutation",
                            location=Location(
                                line=2, column=22, line_end=2, column_end=35
                            ),
                        ),
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=36, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            subscription {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="subscription",
                        name=None,
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=26, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            subscription NamedSubscription {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="subscription",
                        name=NameNode(
                            value="NamedSubscription",
                            location=Location(
                                line=2, column=26, line_end=2, column_end=43
                            ),
                        ),
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=44, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            query NamedQuery {
              hello
            }

            mutation NamedMutation {
              hello
            }

            subscription NamedSubscription {
              hello
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=NameNode(
                            value="NamedQuery",
                            location=Location(
                                line=2, column=19, line_end=2, column_end=29
                            ),
                        ),
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=30, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    ),
                    OperationDefinitionNode(
                        operation_type="mutation",
                        name=NameNode(
                            value="NamedMutation",
                            location=Location(
                                line=6, column=22, line_end=6, column_end=35
                            ),
                        ),
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=7,
                                            column=15,
                                            line_end=7,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=7,
                                        column=15,
                                        line_end=7,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=6, column=36, line_end=8, column_end=14
                            ),
                        ),
                        location=Location(
                            line=6, column=13, line_end=8, column_end=14
                        ),
                    ),
                    OperationDefinitionNode(
                        operation_type="subscription",
                        name=NameNode(
                            value="NamedSubscription",
                            location=Location(
                                line=10, column=26, line_end=10, column_end=43
                            ),
                        ),
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=11,
                                            column=15,
                                            line_end=11,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=11,
                                        column=15,
                                        line_end=11,
                                        column_end=20,
                                    ),
                                )
                            ],
                            location=Location(
                                line=10, column=44, line_end=12, column_end=14
                            ),
                        ),
                        location=Location(
                            line=10, column=13, line_end=12, column_end=14
                        ),
                    ),
                ],
                location=Location(
                    line=2, column=13, line_end=12, column_end=14
                ),
            ),
        ),
        (
            """
            query($name: String!, $limit: Int!) {
              hello(name: $name) @truncate(limit: $limit)
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=None,
                        variable_definitions=[
                            VariableDefinitionNode(
                                variable=VariableNode(
                                    name=NameNode(
                                        value="name",
                                        location=Location(
                                            line=2,
                                            column=19,
                                            line_end=2,
                                            column_end=24,
                                        ),
                                    ),
                                    location=Location(
                                        line=2,
                                        column=19,
                                        line_end=2,
                                        column_end=24,
                                    ),
                                ),
                                type=NonNullTypeNode(
                                    type=NamedTypeNode(
                                        name=NameNode(
                                            value="String",
                                            location=Location(
                                                line=2,
                                                column=26,
                                                line_end=2,
                                                column_end=32,
                                            ),
                                        ),
                                        location=Location(
                                            line=2,
                                            column=26,
                                            line_end=2,
                                            column_end=32,
                                        ),
                                    ),
                                    location=Location(
                                        line=2,
                                        column=26,
                                        line_end=2,
                                        column_end=33,
                                    ),
                                ),
                                default_value=None,
                                location=Location(
                                    line=2,
                                    column=19,
                                    line_end=2,
                                    column_end=33,
                                ),
                            ),
                            VariableDefinitionNode(
                                variable=VariableNode(
                                    name=NameNode(
                                        value="limit",
                                        location=Location(
                                            line=2,
                                            column=35,
                                            line_end=2,
                                            column_end=41,
                                        ),
                                    ),
                                    location=Location(
                                        line=2,
                                        column=35,
                                        line_end=2,
                                        column_end=41,
                                    ),
                                ),
                                type=NonNullTypeNode(
                                    type=NamedTypeNode(
                                        name=NameNode(
                                            value="Int",
                                            location=Location(
                                                line=2,
                                                column=43,
                                                line_end=2,
                                                column_end=46,
                                            ),
                                        ),
                                        location=Location(
                                            line=2,
                                            column=43,
                                            line_end=2,
                                            column_end=46,
                                        ),
                                    ),
                                    location=Location(
                                        line=2,
                                        column=43,
                                        line_end=2,
                                        column_end=47,
                                    ),
                                ),
                                default_value=None,
                                location=Location(
                                    line=2,
                                    column=35,
                                    line_end=2,
                                    column_end=47,
                                ),
                            ),
                        ],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="hello",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=20,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="name",
                                                location=Location(
                                                    line=3,
                                                    column=21,
                                                    line_end=3,
                                                    column_end=25,
                                                ),
                                            ),
                                            value=VariableNode(
                                                name=NameNode(
                                                    value="name",
                                                    location=Location(
                                                        line=3,
                                                        column=27,
                                                        line_end=3,
                                                        column_end=32,
                                                    ),
                                                ),
                                                location=Location(
                                                    line=3,
                                                    column=27,
                                                    line_end=3,
                                                    column_end=32,
                                                ),
                                            ),
                                            location=Location(
                                                line=3,
                                                column=21,
                                                line_end=3,
                                                column_end=32,
                                            ),
                                        )
                                    ],
                                    directives=[
                                        DirectiveNode(
                                            name=NameNode(
                                                value="truncate",
                                                location=Location(
                                                    line=3,
                                                    column=35,
                                                    line_end=3,
                                                    column_end=43,
                                                ),
                                            ),
                                            arguments=[
                                                ArgumentNode(
                                                    name=NameNode(
                                                        value="limit",
                                                        location=Location(
                                                            line=3,
                                                            column=44,
                                                            line_end=3,
                                                            column_end=49,
                                                        ),
                                                    ),
                                                    value=VariableNode(
                                                        name=NameNode(
                                                            value="limit",
                                                            location=Location(
                                                                line=3,
                                                                column=51,
                                                                line_end=3,
                                                                column_end=57,
                                                            ),
                                                        ),
                                                        location=Location(
                                                            line=3,
                                                            column=51,
                                                            line_end=3,
                                                            column_end=57,
                                                        ),
                                                    ),
                                                    location=Location(
                                                        line=3,
                                                        column=44,
                                                        line_end=3,
                                                        column_end=57,
                                                    ),
                                                )
                                            ],
                                            location=Location(
                                                line=3,
                                                column=34,
                                                line_end=3,
                                                column_end=58,
                                            ),
                                        )
                                    ],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=58,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=49, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
        (
            """
            query {
              booleanArgument(arg1: true, arg2: false)
              enumArgument(arg1: ENUM_VALUE)
              floatArgument(arg1: 0.0, arg2: 10.20, arg3: 1e3,
              arg4: 1.234e2, arg5: -1.234e2)
              intArgument(arg1: 0, arg2: 10, arg3: -10)
              nullArgument(arg1: null)
              stringArgument(arg1: "", arg2: "STRING_VALUE")
              listArgument(arg1: [], arg2: [true, ENUM_VALUE, -1.234e2, -10,
              null, "STRING_VALUE"])
              objectArgument(arg1: {}, arg2: {
                boolean: true
                enum: ENUM_VALUE
                float: -1.234e2
                int: -10
                null: null
                string: "STRING_VALUE"
              })
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=None,
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="booleanArgument",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=30,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=3,
                                                    column=31,
                                                    line_end=3,
                                                    column_end=35,
                                                ),
                                            ),
                                            value=BooleanValueNode(
                                                value=True,
                                                location=Location(
                                                    line=3,
                                                    column=37,
                                                    line_end=3,
                                                    column_end=41,
                                                ),
                                            ),
                                            location=Location(
                                                line=3,
                                                column=31,
                                                line_end=3,
                                                column_end=41,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg2",
                                                location=Location(
                                                    line=3,
                                                    column=43,
                                                    line_end=3,
                                                    column_end=47,
                                                ),
                                            ),
                                            value=BooleanValueNode(
                                                value=False,
                                                location=Location(
                                                    line=3,
                                                    column=49,
                                                    line_end=3,
                                                    column_end=54,
                                                ),
                                            ),
                                            location=Location(
                                                line=3,
                                                column=43,
                                                line_end=3,
                                                column_end=54,
                                            ),
                                        ),
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=55,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="enumArgument",
                                        location=Location(
                                            line=4,
                                            column=15,
                                            line_end=4,
                                            column_end=27,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=4,
                                                    column=28,
                                                    line_end=4,
                                                    column_end=32,
                                                ),
                                            ),
                                            value=EnumValueNode(
                                                value="ENUM_VALUE",
                                                location=Location(
                                                    line=4,
                                                    column=34,
                                                    line_end=4,
                                                    column_end=44,
                                                ),
                                            ),
                                            location=Location(
                                                line=4,
                                                column=28,
                                                line_end=4,
                                                column_end=44,
                                            ),
                                        )
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=4,
                                        column=15,
                                        line_end=4,
                                        column_end=45,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="floatArgument",
                                        location=Location(
                                            line=5,
                                            column=15,
                                            line_end=5,
                                            column_end=28,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=5,
                                                    column=29,
                                                    line_end=5,
                                                    column_end=33,
                                                ),
                                            ),
                                            value=FloatValueNode(
                                                value="0.0",
                                                location=Location(
                                                    line=5,
                                                    column=35,
                                                    line_end=5,
                                                    column_end=38,
                                                ),
                                            ),
                                            location=Location(
                                                line=5,
                                                column=29,
                                                line_end=5,
                                                column_end=38,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg2",
                                                location=Location(
                                                    line=5,
                                                    column=40,
                                                    line_end=5,
                                                    column_end=44,
                                                ),
                                            ),
                                            value=FloatValueNode(
                                                value="10.20",
                                                location=Location(
                                                    line=5,
                                                    column=46,
                                                    line_end=5,
                                                    column_end=51,
                                                ),
                                            ),
                                            location=Location(
                                                line=5,
                                                column=40,
                                                line_end=5,
                                                column_end=51,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg3",
                                                location=Location(
                                                    line=5,
                                                    column=53,
                                                    line_end=5,
                                                    column_end=57,
                                                ),
                                            ),
                                            value=FloatValueNode(
                                                value="1e3",
                                                location=Location(
                                                    line=5,
                                                    column=59,
                                                    line_end=5,
                                                    column_end=62,
                                                ),
                                            ),
                                            location=Location(
                                                line=5,
                                                column=53,
                                                line_end=5,
                                                column_end=62,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg4",
                                                location=Location(
                                                    line=6,
                                                    column=15,
                                                    line_end=6,
                                                    column_end=19,
                                                ),
                                            ),
                                            value=FloatValueNode(
                                                value="1.234e2",
                                                location=Location(
                                                    line=6,
                                                    column=21,
                                                    line_end=6,
                                                    column_end=28,
                                                ),
                                            ),
                                            location=Location(
                                                line=6,
                                                column=15,
                                                line_end=6,
                                                column_end=28,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg5",
                                                location=Location(
                                                    line=6,
                                                    column=30,
                                                    line_end=6,
                                                    column_end=34,
                                                ),
                                            ),
                                            value=FloatValueNode(
                                                value="-1.234e2",
                                                location=Location(
                                                    line=6,
                                                    column=36,
                                                    line_end=6,
                                                    column_end=44,
                                                ),
                                            ),
                                            location=Location(
                                                line=6,
                                                column=30,
                                                line_end=6,
                                                column_end=44,
                                            ),
                                        ),
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=5,
                                        column=15,
                                        line_end=6,
                                        column_end=45,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="intArgument",
                                        location=Location(
                                            line=7,
                                            column=15,
                                            line_end=7,
                                            column_end=26,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=7,
                                                    column=27,
                                                    line_end=7,
                                                    column_end=31,
                                                ),
                                            ),
                                            value=IntValueNode(
                                                value="0",
                                                location=Location(
                                                    line=7,
                                                    column=33,
                                                    line_end=7,
                                                    column_end=34,
                                                ),
                                            ),
                                            location=Location(
                                                line=7,
                                                column=27,
                                                line_end=7,
                                                column_end=34,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg2",
                                                location=Location(
                                                    line=7,
                                                    column=36,
                                                    line_end=7,
                                                    column_end=40,
                                                ),
                                            ),
                                            value=IntValueNode(
                                                value="10",
                                                location=Location(
                                                    line=7,
                                                    column=42,
                                                    line_end=7,
                                                    column_end=44,
                                                ),
                                            ),
                                            location=Location(
                                                line=7,
                                                column=36,
                                                line_end=7,
                                                column_end=44,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg3",
                                                location=Location(
                                                    line=7,
                                                    column=46,
                                                    line_end=7,
                                                    column_end=50,
                                                ),
                                            ),
                                            value=IntValueNode(
                                                value="-10",
                                                location=Location(
                                                    line=7,
                                                    column=52,
                                                    line_end=7,
                                                    column_end=55,
                                                ),
                                            ),
                                            location=Location(
                                                line=7,
                                                column=46,
                                                line_end=7,
                                                column_end=55,
                                            ),
                                        ),
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=7,
                                        column=15,
                                        line_end=7,
                                        column_end=56,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="nullArgument",
                                        location=Location(
                                            line=8,
                                            column=15,
                                            line_end=8,
                                            column_end=27,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=8,
                                                    column=28,
                                                    line_end=8,
                                                    column_end=32,
                                                ),
                                            ),
                                            value=NullValueNode(
                                                location=Location(
                                                    line=8,
                                                    column=34,
                                                    line_end=8,
                                                    column_end=38,
                                                )
                                            ),
                                            location=Location(
                                                line=8,
                                                column=28,
                                                line_end=8,
                                                column_end=38,
                                            ),
                                        )
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=8,
                                        column=15,
                                        line_end=8,
                                        column_end=39,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="stringArgument",
                                        location=Location(
                                            line=9,
                                            column=15,
                                            line_end=9,
                                            column_end=29,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=9,
                                                    column=30,
                                                    line_end=9,
                                                    column_end=34,
                                                ),
                                            ),
                                            value=StringValueNode(
                                                value="",
                                                location=Location(
                                                    line=9,
                                                    column=36,
                                                    line_end=9,
                                                    column_end=38,
                                                ),
                                            ),
                                            location=Location(
                                                line=9,
                                                column=30,
                                                line_end=9,
                                                column_end=38,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg2",
                                                location=Location(
                                                    line=9,
                                                    column=40,
                                                    line_end=9,
                                                    column_end=44,
                                                ),
                                            ),
                                            value=StringValueNode(
                                                value="STRING_VALUE",
                                                location=Location(
                                                    line=9,
                                                    column=46,
                                                    line_end=9,
                                                    column_end=60,
                                                ),
                                            ),
                                            location=Location(
                                                line=9,
                                                column=40,
                                                line_end=9,
                                                column_end=60,
                                            ),
                                        ),
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=9,
                                        column=15,
                                        line_end=9,
                                        column_end=61,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="listArgument",
                                        location=Location(
                                            line=10,
                                            column=15,
                                            line_end=10,
                                            column_end=27,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=10,
                                                    column=28,
                                                    line_end=10,
                                                    column_end=32,
                                                ),
                                            ),
                                            value=ListValueNode(
                                                values=[],
                                                location=Location(
                                                    line=10,
                                                    column=34,
                                                    line_end=10,
                                                    column_end=36,
                                                ),
                                            ),
                                            location=Location(
                                                line=10,
                                                column=28,
                                                line_end=10,
                                                column_end=36,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg2",
                                                location=Location(
                                                    line=10,
                                                    column=38,
                                                    line_end=10,
                                                    column_end=42,
                                                ),
                                            ),
                                            value=ListValueNode(
                                                values=[
                                                    BooleanValueNode(
                                                        value=True,
                                                        location=Location(
                                                            line=10,
                                                            column=45,
                                                            line_end=10,
                                                            column_end=49,
                                                        ),
                                                    ),
                                                    EnumValueNode(
                                                        value="ENUM_VALUE",
                                                        location=Location(
                                                            line=10,
                                                            column=51,
                                                            line_end=10,
                                                            column_end=61,
                                                        ),
                                                    ),
                                                    FloatValueNode(
                                                        value="-1.234e2",
                                                        location=Location(
                                                            line=10,
                                                            column=63,
                                                            line_end=10,
                                                            column_end=71,
                                                        ),
                                                    ),
                                                    IntValueNode(
                                                        value="-10",
                                                        location=Location(
                                                            line=10,
                                                            column=73,
                                                            line_end=10,
                                                            column_end=76,
                                                        ),
                                                    ),
                                                    NullValueNode(
                                                        location=Location(
                                                            line=11,
                                                            column=15,
                                                            line_end=11,
                                                            column_end=19,
                                                        )
                                                    ),
                                                    StringValueNode(
                                                        value="STRING_VALUE",
                                                        location=Location(
                                                            line=11,
                                                            column=21,
                                                            line_end=11,
                                                            column_end=35,
                                                        ),
                                                    ),
                                                ],
                                                location=Location(
                                                    line=10,
                                                    column=44,
                                                    line_end=11,
                                                    column_end=36,
                                                ),
                                            ),
                                            location=Location(
                                                line=10,
                                                column=38,
                                                line_end=11,
                                                column_end=36,
                                            ),
                                        ),
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=10,
                                        column=15,
                                        line_end=11,
                                        column_end=37,
                                    ),
                                ),
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="objectArgument",
                                        location=Location(
                                            line=12,
                                            column=15,
                                            line_end=12,
                                            column_end=29,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg1",
                                                location=Location(
                                                    line=12,
                                                    column=30,
                                                    line_end=12,
                                                    column_end=34,
                                                ),
                                            ),
                                            value=ObjectValueNode(
                                                fields=[],
                                                location=Location(
                                                    line=12,
                                                    column=36,
                                                    line_end=12,
                                                    column_end=38,
                                                ),
                                            ),
                                            location=Location(
                                                line=12,
                                                column=30,
                                                line_end=12,
                                                column_end=38,
                                            ),
                                        ),
                                        ArgumentNode(
                                            name=NameNode(
                                                value="arg2",
                                                location=Location(
                                                    line=12,
                                                    column=40,
                                                    line_end=12,
                                                    column_end=44,
                                                ),
                                            ),
                                            value=ObjectValueNode(
                                                fields=[
                                                    ObjectFieldNode(
                                                        name=NameNode(
                                                            value="boolean",
                                                            location=Location(
                                                                line=13,
                                                                column=17,
                                                                line_end=13,
                                                                column_end=24,
                                                            ),
                                                        ),
                                                        value=BooleanValueNode(
                                                            value=True,
                                                            location=Location(
                                                                line=13,
                                                                column=26,
                                                                line_end=13,
                                                                column_end=30,
                                                            ),
                                                        ),
                                                        location=Location(
                                                            line=13,
                                                            column=17,
                                                            line_end=13,
                                                            column_end=30,
                                                        ),
                                                    ),
                                                    ObjectFieldNode(
                                                        name=NameNode(
                                                            value="enum",
                                                            location=Location(
                                                                line=14,
                                                                column=17,
                                                                line_end=14,
                                                                column_end=21,
                                                            ),
                                                        ),
                                                        value=EnumValueNode(
                                                            value="ENUM_VALUE",
                                                            location=Location(
                                                                line=14,
                                                                column=23,
                                                                line_end=14,
                                                                column_end=33,
                                                            ),
                                                        ),
                                                        location=Location(
                                                            line=14,
                                                            column=17,
                                                            line_end=14,
                                                            column_end=33,
                                                        ),
                                                    ),
                                                    ObjectFieldNode(
                                                        name=NameNode(
                                                            value="float",
                                                            location=Location(
                                                                line=15,
                                                                column=17,
                                                                line_end=15,
                                                                column_end=22,
                                                            ),
                                                        ),
                                                        value=FloatValueNode(
                                                            value="-1.234e2",
                                                            location=Location(
                                                                line=15,
                                                                column=24,
                                                                line_end=15,
                                                                column_end=32,
                                                            ),
                                                        ),
                                                        location=Location(
                                                            line=15,
                                                            column=17,
                                                            line_end=15,
                                                            column_end=32,
                                                        ),
                                                    ),
                                                    ObjectFieldNode(
                                                        name=NameNode(
                                                            value="int",
                                                            location=Location(
                                                                line=16,
                                                                column=17,
                                                                line_end=16,
                                                                column_end=20,
                                                            ),
                                                        ),
                                                        value=IntValueNode(
                                                            value="-10",
                                                            location=Location(
                                                                line=16,
                                                                column=22,
                                                                line_end=16,
                                                                column_end=25,
                                                            ),
                                                        ),
                                                        location=Location(
                                                            line=16,
                                                            column=17,
                                                            line_end=16,
                                                            column_end=25,
                                                        ),
                                                    ),
                                                    ObjectFieldNode(
                                                        name=NameNode(
                                                            value="null",
                                                            location=Location(
                                                                line=17,
                                                                column=17,
                                                                line_end=17,
                                                                column_end=21,
                                                            ),
                                                        ),
                                                        value=NullValueNode(
                                                            location=Location(
                                                                line=17,
                                                                column=23,
                                                                line_end=17,
                                                                column_end=27,
                                                            )
                                                        ),
                                                        location=Location(
                                                            line=17,
                                                            column=17,
                                                            line_end=17,
                                                            column_end=27,
                                                        ),
                                                    ),
                                                    ObjectFieldNode(
                                                        name=NameNode(
                                                            value="string",
                                                            location=Location(
                                                                line=18,
                                                                column=17,
                                                                line_end=18,
                                                                column_end=23,
                                                            ),
                                                        ),
                                                        value=StringValueNode(
                                                            value="STRING_VALUE",
                                                            location=Location(
                                                                line=18,
                                                                column=25,
                                                                line_end=18,
                                                                column_end=39,
                                                            ),
                                                        ),
                                                        location=Location(
                                                            line=18,
                                                            column=17,
                                                            line_end=18,
                                                            column_end=39,
                                                        ),
                                                    ),
                                                ],
                                                location=Location(
                                                    line=12,
                                                    column=46,
                                                    line_end=19,
                                                    column_end=16,
                                                ),
                                            ),
                                            location=Location(
                                                line=12,
                                                column=40,
                                                line_end=19,
                                                column_end=16,
                                            ),
                                        ),
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=12,
                                        column=15,
                                        line_end=19,
                                        column_end=17,
                                    ),
                                ),
                            ],
                            location=Location(
                                line=2, column=19, line_end=20, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=20, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=20, column_end=14
                ),
            ),
        ),
        (
            """
            fragment MyTypeFields on MyType @debug(if: true) {
              ... on MyType @debug(if: true) {
                aMyTypeField: myTypeField
              }
            }

            query {
              ... @include(if: false) {
                myType {
                  ...MyTypeFields
                }
              }
            }
            """,
            DocumentNode(
                definitions=[
                    FragmentDefinitionNode(
                        name=NameNode(
                            value="MyTypeFields",
                            location=Location(
                                line=2, column=22, line_end=2, column_end=34
                            ),
                        ),
                        type_condition=NamedTypeNode(
                            name=NameNode(
                                value="MyType",
                                location=Location(
                                    line=2,
                                    column=38,
                                    line_end=2,
                                    column_end=44,
                                ),
                            ),
                            location=Location(
                                line=2, column=38, line_end=2, column_end=44
                            ),
                        ),
                        directives=[
                            DirectiveNode(
                                name=NameNode(
                                    value="debug",
                                    location=Location(
                                        line=2,
                                        column=46,
                                        line_end=2,
                                        column_end=51,
                                    ),
                                ),
                                arguments=[
                                    ArgumentNode(
                                        name=NameNode(
                                            value="if",
                                            location=Location(
                                                line=2,
                                                column=52,
                                                line_end=2,
                                                column_end=54,
                                            ),
                                        ),
                                        value=BooleanValueNode(
                                            value=True,
                                            location=Location(
                                                line=2,
                                                column=56,
                                                line_end=2,
                                                column_end=60,
                                            ),
                                        ),
                                        location=Location(
                                            line=2,
                                            column=52,
                                            line_end=2,
                                            column_end=60,
                                        ),
                                    )
                                ],
                                location=Location(
                                    line=2,
                                    column=45,
                                    line_end=2,
                                    column_end=61,
                                ),
                            )
                        ],
                        selection_set=SelectionSetNode(
                            selections=[
                                InlineFragmentNode(
                                    type_condition=NamedTypeNode(
                                        name=NameNode(
                                            value="MyType",
                                            location=Location(
                                                line=3,
                                                column=22,
                                                line_end=3,
                                                column_end=28,
                                            ),
                                        ),
                                        location=Location(
                                            line=3,
                                            column=22,
                                            line_end=3,
                                            column_end=28,
                                        ),
                                    ),
                                    directives=[
                                        DirectiveNode(
                                            name=NameNode(
                                                value="debug",
                                                location=Location(
                                                    line=3,
                                                    column=30,
                                                    line_end=3,
                                                    column_end=35,
                                                ),
                                            ),
                                            arguments=[
                                                ArgumentNode(
                                                    name=NameNode(
                                                        value="if",
                                                        location=Location(
                                                            line=3,
                                                            column=36,
                                                            line_end=3,
                                                            column_end=38,
                                                        ),
                                                    ),
                                                    value=BooleanValueNode(
                                                        value=True,
                                                        location=Location(
                                                            line=3,
                                                            column=40,
                                                            line_end=3,
                                                            column_end=44,
                                                        ),
                                                    ),
                                                    location=Location(
                                                        line=3,
                                                        column=36,
                                                        line_end=3,
                                                        column_end=44,
                                                    ),
                                                )
                                            ],
                                            location=Location(
                                                line=3,
                                                column=29,
                                                line_end=3,
                                                column_end=45,
                                            ),
                                        )
                                    ],
                                    selection_set=SelectionSetNode(
                                        selections=[
                                            FieldNode(
                                                alias=NameNode(
                                                    value="aMyTypeField",
                                                    location=Location(
                                                        line=4,
                                                        column=17,
                                                        line_end=4,
                                                        column_end=29,
                                                    ),
                                                ),
                                                name=NameNode(
                                                    value="myTypeField",
                                                    location=Location(
                                                        line=4,
                                                        column=31,
                                                        line_end=4,
                                                        column_end=42,
                                                    ),
                                                ),
                                                arguments=[],
                                                directives=[],
                                                selection_set=None,
                                                location=Location(
                                                    line=4,
                                                    column=17,
                                                    line_end=4,
                                                    column_end=42,
                                                ),
                                            )
                                        ],
                                        location=Location(
                                            line=3,
                                            column=46,
                                            line_end=5,
                                            column_end=16,
                                        ),
                                    ),
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=5,
                                        column_end=16,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=62, line_end=6, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=6, column_end=14
                        ),
                    ),
                    OperationDefinitionNode(
                        operation_type="query",
                        name=None,
                        variable_definitions=[],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                InlineFragmentNode(
                                    type_condition=None,
                                    directives=[
                                        DirectiveNode(
                                            name=NameNode(
                                                value="include",
                                                location=Location(
                                                    line=9,
                                                    column=20,
                                                    line_end=9,
                                                    column_end=27,
                                                ),
                                            ),
                                            arguments=[
                                                ArgumentNode(
                                                    name=NameNode(
                                                        value="if",
                                                        location=Location(
                                                            line=9,
                                                            column=28,
                                                            line_end=9,
                                                            column_end=30,
                                                        ),
                                                    ),
                                                    value=BooleanValueNode(
                                                        value=False,
                                                        location=Location(
                                                            line=9,
                                                            column=32,
                                                            line_end=9,
                                                            column_end=37,
                                                        ),
                                                    ),
                                                    location=Location(
                                                        line=9,
                                                        column=28,
                                                        line_end=9,
                                                        column_end=37,
                                                    ),
                                                )
                                            ],
                                            location=Location(
                                                line=9,
                                                column=19,
                                                line_end=9,
                                                column_end=38,
                                            ),
                                        )
                                    ],
                                    selection_set=SelectionSetNode(
                                        selections=[
                                            FieldNode(
                                                alias=None,
                                                name=NameNode(
                                                    value="myType",
                                                    location=Location(
                                                        line=10,
                                                        column=17,
                                                        line_end=10,
                                                        column_end=23,
                                                    ),
                                                ),
                                                arguments=[],
                                                directives=[],
                                                selection_set=SelectionSetNode(
                                                    selections=[
                                                        FragmentSpreadNode(
                                                            name=NameNode(
                                                                value="MyTypeFields",
                                                                location=Location(
                                                                    line=11,
                                                                    column=22,
                                                                    line_end=11,
                                                                    column_end=34,
                                                                ),
                                                            ),
                                                            directives=[],
                                                            location=Location(
                                                                line=11,
                                                                column=19,
                                                                line_end=11,
                                                                column_end=34,
                                                            ),
                                                        )
                                                    ],
                                                    location=Location(
                                                        line=10,
                                                        column=24,
                                                        line_end=12,
                                                        column_end=18,
                                                    ),
                                                ),
                                                location=Location(
                                                    line=10,
                                                    column=17,
                                                    line_end=12,
                                                    column_end=18,
                                                ),
                                            )
                                        ],
                                        location=Location(
                                            line=9,
                                            column=39,
                                            line_end=13,
                                            column_end=16,
                                        ),
                                    ),
                                    location=Location(
                                        line=9,
                                        column=15,
                                        line_end=13,
                                        column_end=16,
                                    ),
                                )
                            ],
                            location=Location(
                                line=8, column=19, line_end=14, column_end=14
                            ),
                        ),
                        location=Location(
                            line=8, column=13, line_end=14, column_end=14
                        ),
                    ),
                ],
                location=Location(
                    line=2, column=13, line_end=14, column_end=14
                ),
            ),
        ),
        (
            """
            query($nonNullList: [MyType!]!) {
              nonsenseField(nonsenseArg: $nonNullList)
            }
            """,
            DocumentNode(
                definitions=[
                    OperationDefinitionNode(
                        operation_type="query",
                        name=None,
                        variable_definitions=[
                            VariableDefinitionNode(
                                variable=VariableNode(
                                    name=NameNode(
                                        value="nonNullList",
                                        location=Location(
                                            line=2,
                                            column=19,
                                            line_end=2,
                                            column_end=31,
                                        ),
                                    ),
                                    location=Location(
                                        line=2,
                                        column=19,
                                        line_end=2,
                                        column_end=31,
                                    ),
                                ),
                                type=NonNullTypeNode(
                                    type=ListTypeNode(
                                        type=NonNullTypeNode(
                                            type=NamedTypeNode(
                                                name=NameNode(
                                                    value="MyType",
                                                    location=Location(
                                                        line=2,
                                                        column=34,
                                                        line_end=2,
                                                        column_end=40,
                                                    ),
                                                ),
                                                location=Location(
                                                    line=2,
                                                    column=34,
                                                    line_end=2,
                                                    column_end=40,
                                                ),
                                            ),
                                            location=Location(
                                                line=2,
                                                column=34,
                                                line_end=2,
                                                column_end=41,
                                            ),
                                        ),
                                        location=Location(
                                            line=2,
                                            column=33,
                                            line_end=2,
                                            column_end=42,
                                        ),
                                    ),
                                    location=Location(
                                        line=2,
                                        column=33,
                                        line_end=2,
                                        column_end=43,
                                    ),
                                ),
                                default_value=None,
                                location=Location(
                                    line=2,
                                    column=19,
                                    line_end=2,
                                    column_end=43,
                                ),
                            )
                        ],
                        directives=[],
                        selection_set=SelectionSetNode(
                            selections=[
                                FieldNode(
                                    alias=None,
                                    name=NameNode(
                                        value="nonsenseField",
                                        location=Location(
                                            line=3,
                                            column=15,
                                            line_end=3,
                                            column_end=28,
                                        ),
                                    ),
                                    arguments=[
                                        ArgumentNode(
                                            name=NameNode(
                                                value="nonsenseArg",
                                                location=Location(
                                                    line=3,
                                                    column=29,
                                                    line_end=3,
                                                    column_end=40,
                                                ),
                                            ),
                                            value=VariableNode(
                                                name=NameNode(
                                                    value="nonNullList",
                                                    location=Location(
                                                        line=3,
                                                        column=42,
                                                        line_end=3,
                                                        column_end=54,
                                                    ),
                                                ),
                                                location=Location(
                                                    line=3,
                                                    column=42,
                                                    line_end=3,
                                                    column_end=54,
                                                ),
                                            ),
                                            location=Location(
                                                line=3,
                                                column=29,
                                                line_end=3,
                                                column_end=54,
                                            ),
                                        )
                                    ],
                                    directives=[],
                                    selection_set=None,
                                    location=Location(
                                        line=3,
                                        column=15,
                                        line_end=3,
                                        column_end=55,
                                    ),
                                )
                            ],
                            location=Location(
                                line=2, column=45, line_end=4, column_end=14
                            ),
                        ),
                        location=Location(
                            line=2, column=13, line_end=4, column_end=14
                        ),
                    )
                ],
                location=Location(
                    line=2, column=13, line_end=4, column_end=14
                ),
            ),
        ),
    ],
)
def test_parse_to_document(sdl, expected):
    assert parse_to_document(sdl) == expected
